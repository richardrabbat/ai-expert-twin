<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lighty AI - Expert AI Platform Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chat-bubble-user {
            background-color: #3B82F6; /* blue-500 */
            color: white;
        }
        .chat-bubble-ai {
            background-color: #E5E7EB; /* gray-200 */
            color: #1F2937; /* gray-800 */
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #9CA3AF; /* gray-400 */
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
    </style>
</head>
<body class="bg-gray-100 antialiased">

    <div id="app" class="w-full min-h-screen flex items-center justify-center p-4">

        <!-- Screen 1: Login -->
        <div id="login-screen" class="w-full max-w-sm mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="flex items-center justify-center mb-6">
                    <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.657 7.343A8 8 0 0118 18c.333.667.667 1.333 1 2h-1.343a8 8 0 01-1.02-1.343zM6.343 7.343L6 7m0 0l-.343.343"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18a6 6 0 00-6-6c0 1.931.83 3.681 2.143 4.857L12 18z"></path></svg>
                    <h1 class="text-3xl font-bold text-gray-800 ml-3">Lighty AI</h1>
                </div>
                <h2 class="text-center text-gray-600 mb-8">Expert AI Platform</h2>
                
                <div class="space-y-4">
                    <div>
                        <label for="email" class="text-sm font-medium text-gray-700">Email</label>
                        <input type="email" id="email" value="sarah.tech@autocorp.com" class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" readonly>
                    </div>
                    <div>
                        <label for="password" class="text-sm font-medium text-gray-700">Password</label>
                        <input type="password" id="password" value="************" class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" readonly>
                    </div>
                </div>

                <button onclick="showScreen('dashboard-screen')" class="w-full mt-8 bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300">
                    Sign In
                </button>
            </div>
            <p class="text-center text-xs text-gray-500 mt-4">This is a simulated demo. Click "Sign In" to continue.</p>
        </div>

        <!-- Screen 2: Dashboard -->
        <div id="dashboard-screen" class="hidden w-full max-w-6xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg">
                <header class="p-6 border-b border-gray-200 flex justify-between items-center">
                    <div class="flex items-center">
                        <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.657 7.343A8 8 0 0118 18c.333.667.667 1.333 1 2h-1.343a8 8 0 01-1.02-1.343zM6.343 7.343L6 7m0 0l-.343.343"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18a6 6 0 00-6-6c0 1.931.83 3.681 2.143 4.857L12 18z"></path></svg>
                        <h1 class="text-2xl font-bold text-gray-800 ml-3">Lighty AI</h1>
                    </div>
                    <div class="flex items-center">
                        <span class="text-gray-600 mr-4">Welcome, Sarah</span>
                        <img src="https://placehold.co/40x40/E0E7FF/4F46E5?text=ST" alt="Sarah's avatar" class="rounded-full">
                    </div>
                </header>
                <main class="p-8">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Plant Floor Status - Bay 7</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Card 1: Stamping Press (Alert) -->
                        <div id="stamping-press-card" class="bg-red-50 border-2 border-red-500 rounded-xl p-6 shadow-md transform hover:scale-105 transition-transform duration-300 cursor-pointer" onclick="showScreen('interaction-screen')">
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-xl text-red-800">Stamping Press P-12</h3>
                                <div id="stamping-press-status" class="bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse">ALERT</div>
                            </div>
                            <p id="stamping-press-error" class="text-red-600 text-sm mt-1">Error Code: 7B-441 (Pressure Sensor Fault)</p>
                            <img src="https://placehold.co/600x400/333333/FFFFFF?text=Stamping+Press" alt="Stamping Press" class="my-4 rounded-lg object-cover w-full h-40">
                            <div class="flex justify-between items-center text-sm text-red-700">
                                <span>Uptime: 99.8%</span>
                                <span id="stamping-press-attention" class="font-semibold">Needs Attention</span>
                            </div>
                        </div>

                        <!-- Card 2: Assembly Line -->
                        <div class="bg-white rounded-xl p-6 shadow-md transform hover:scale-105 transition-transform duration-300">
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-xl text-gray-800">Assembly Line A-03</h3>
                                <div class="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-full">NORMAL</div>
                            </div>
                            <p class="text-gray-500 text-sm mt-1">Nominal Operation</p>
                            <img src="https://placehold.co/600x400/555555/FFFFFF?text=Assembly+Line" alt="Assembly Line" class="my-4 rounded-lg object-cover w-full h-40">
                            <div class="flex justify-between items-center text-sm text-gray-600">
                                <span>Uptime: 99.9%</span>
                                <span>Cycle Time: 42s</span>
                            </div>
                        </div>

                        <!-- Card 3: CNC Mill -->
                        <div class="bg-white rounded-xl p-6 shadow-md transform hover:scale-105 transition-transform duration-300">
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-xl text-gray-800">CNC Mill C-08</h3>
                               <div class="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-full">NORMAL</div>
                            </div>
                            <p class="text-gray-500 text-sm mt-1">Running Program #214</p>
                            <img src="https://placehold.co/600x400/777777/FFFFFF?text=CNC+Mill" alt="CNC Mill" class="my-4 rounded-lg object-cover w-full h-40">
                            <div class="flex justify-between items-center text-sm text-gray-600">
                                <span>Uptime: 99.9%</span>
                                <span>Tool Life: 87%</span>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Screen 3: Interaction Screen -->
        <div id="interaction-screen" class="hidden w-full max-w-4xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg flex flex-col h-[90vh]">
                <header class="p-4 border-b border-gray-200 flex justify-between items-center flex-shrink-0">
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Stamping Press P-12 Issue</h2>
                        <p class="text-sm text-red-600">Active Session with Dave's Digital Twin</p>
                    </div>
                    <button onclick="showScreen('dashboard-screen')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </header>

                <main id="chat-container" class="flex-grow p-6 overflow-y-auto space-y-6">
                    <!-- Chat messages will be appended here -->
                </main>

                <footer class="p-4 bg-gray-50 border-t border-gray-200 flex-shrink-0">
                    <div id="user-options" class="flex items-center justify-center space-x-4">
                        <!-- User action buttons will be appended here -->
                    </div>
                </footer>
            </div>
        </div>
        
        <!-- Screen 4: Resolution Screen -->
        <div id="resolution-screen" class="hidden w-full max-w-md mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
                    <svg class="h-10 w-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-900">Issue Resolved!</h2>
                <p class="text-gray-600 mt-2">Stamping Press P-12 is back online.</p>
                
                <div class="mt-6 text-left bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-gray-800 mb-2">Session Summary:</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Time to Resolution:</span>
                            <span class="font-medium text-gray-900">8 minutes</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Estimated Downtime Avoided:</span>
                            <span class="font-medium text-gray-900">~2 hours</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">New Knowledge Captured:</span>
                            <span class="font-medium text-green-600">1 insight</span>
                        </div>
                    </div>
                </div>

                <button onclick="finishResolution()" class="w-full mt-8 bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300">
                    Return to Dashboard
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- State and Data ---
        let currentScreen = 'login-screen';
        let dialogueStep = 0;

        const dialogue = [
            { type: 'user', text: "I have an alert on Stamping Press P-12. Error code 7B-441.", options: [] },
            { type: 'ai', text: "Hello Sarah. I'm Dave's Digital Twin. I see the alert for error 7B-441. I remember Dave dealt with a similar pressure sensor fault about six months ago. Let's start by checking the main hydraulic pressure manifold. Can you open the main access panel, P-A1?", options: ["Okay, I've opened panel P-A1."] },
            { type: 'user', text: "Okay, I've opened panel P-A1.", options: [] },
            { type: 'ai', text: "Great. Look for the primary sensor connector, it's labeled C-7. Does it look securely connected?", image: "https://placehold.co/400x300/DDDDDD/333333?text=Diagram+of+Panel+P-A1", options: ["It looks connected, but maybe a little loose."] },
            { type: 'user', text: "It looks connected, but maybe a little loose.", options: [] },
            { type: 'ai', text: "That's a key detail. Here's something Dave always mentioned: 'You have to jiggle this connector just so, because the vibration from the press sometimes loosens the contact just enough to throw a fault, but not enough to look disconnected.' Try unplugging it, checking the pins for dust, and plugging it back in firmly until you hear a click.", options: ["Done. I heard the click."] },
            { type: 'user', text: "Done. I heard the click.", options: [] },
            { type: 'ai', text: "Excellent. Now, please try clearing the error from the main control panel. I'll monitor the system status.", options: ["Okay, clearing the error now..."] },
            { type: 'user', text: "Okay, clearing the error now...", options: [] },
            { type: 'ai', text: "I'm showing the fault has cleared and system pressure is returning to nominal levels. Great job, Sarah! We've resolved the issue. I've logged this interaction to refine my knowledge base for future problems.", options: ["Finish Session"] },
        ];

        // --- Core Functions ---
        function showScreen(screenId) {
            document.getElementById(currentScreen).classList.add('hidden');
            document.getElementById(screenId).classList.remove('hidden');
            currentScreen = screenId;

            if (screenId === 'interaction-screen') {
                startDialogue();
            }
            if (screenId === 'dashboard-screen') {
                // Reset dialogue if returning to dashboard
                dialogueStep = 0;
                document.getElementById('chat-container').innerHTML = '';
            }
        }

        function startDialogue() {
            dialogueStep = 0;
            document.getElementById('chat-container').innerHTML = '';
            document.getElementById('user-options').innerHTML = '';
            advanceDialogue();
        }

        function advanceDialogue() {
            if (dialogueStep >= dialogue.length) {
                setTimeout(() => showScreen('resolution-screen'), 1000);
                return;
            }

            const step = dialogue[dialogueStep];
            const chatContainer = document.getElementById('chat-container');
            const userOptionsContainer = document.getElementById('user-options');

            // Clear previous options
            userOptionsContainer.innerHTML = '';

            if (step.type === 'user') {
                const userBubble = createChatBubble(step.text, 'user');
                chatContainer.appendChild(userBubble);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                dialogueStep++;
                // AI "thinks" before responding
                showTypingIndicator();
                setTimeout(advanceDialogue, 1500 + Math.random() * 500);
            } else { // AI's turn
                hideTypingIndicator();
                const aiBubble = createChatBubble(step.text, 'ai', step.image);
                chatContainer.appendChild(aiBubble);
                chatContainer.scrollTop = chatContainer.scrollHeight;

                // Display user options for the next step
                if (step.options && step.options.length > 0) {
                    step.options.forEach(optionText => {
                        const button = document.createElement('button');
                        button.className = "bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300";
                        button.textContent = optionText;
                        button.onclick = () => {
                            dialogueStep++;
                            advanceDialogue();
                        };
                        userOptionsContainer.appendChild(button);
                    });
                }
            }
        }
        
        function finishResolution() {
            resetStampingPressCard();
            showScreen('dashboard-screen');
        }

        function resetStampingPressCard() {
            const card = document.getElementById('stamping-press-card');
            card.classList.remove('bg-red-50', 'border-red-500');
            card.classList.add('bg-white');
            
            const status = document.getElementById('stamping-press-status');
            status.textContent = 'NORMAL';
            status.classList.remove('bg-red-500', 'animate-pulse');
            status.classList.add('bg-green-100', 'text-green-800');

            document.getElementById('stamping-press-error').textContent = 'Nominal Operation';
            document.getElementById('stamping-press-attention').textContent = 'Online';
        }

        // --- UI Helper Functions ---
        function createChatBubble(text, type, imageUrl = null) {
            const wrapper = document.createElement('div');
            wrapper.className = `flex items-start gap-3 fade-in ${type === 'user' ? 'justify-end' : 'justify-start'}`;
            
            const bubble = document.createElement('div');
            bubble.className = `max-w-md rounded-xl px-4 py-3 ${type === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'}`;
            
            const textElement = document.createElement('p');
            textElement.className = 'text-sm';
            textElement.textContent = text;
            bubble.appendChild(textElement);

            if (imageUrl) {
                const image = document.createElement('img');
                image.src = imageUrl;
                image.alt = "Diagram";
                image.className = "mt-3 rounded-lg border border-gray-300";
                bubble.appendChild(image);
            }

            const avatar = document.createElement('img');
            avatar.className = 'w-8 h-8 rounded-full';
            avatar.src = type === 'user' 
                ? 'https://placehold.co/40x40/E0E7FF/4F46E5?text=ST' 
                : 'https://placehold.co/40x40/BFDBFE/1E40AF?text=DT';
            avatar.alt = type === 'user' ? 'User Avatar' : 'AI Avatar';

            if (type === 'user') {
                wrapper.appendChild(bubble);
                wrapper.appendChild(avatar);
            } else {
                wrapper.appendChild(avatar);
                wrapper.appendChild(bubble);
            }
            
            return wrapper;
        }

        function showTypingIndicator() {
            const chatContainer = document.getElementById('chat-container');
            let indicator = document.getElementById('typing-indicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'typing-indicator';
                indicator.className = 'flex items-start gap-3 justify-start';
                indicator.innerHTML = `
                    <img class="w-8 h-8 rounded-full" src="https://placehold.co/40x40/BFDBFE/1E40AF?text=DT" alt="AI Avatar">
                    <div class="chat-bubble-ai rounded-xl px-4 py-3 typing-indicator">
                        <span></span><span></span><span></span>
                    </div>
                `;
                chatContainer.appendChild(indicator);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // --- Initial Load ---
        window.onload = () => {
             // For demo purposes, start at login screen.
        };

    </script>
</body>
</html>
